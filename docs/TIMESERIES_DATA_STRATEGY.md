# Timeseries Data Strategy ê¸°íš

## í•µì‹¬ ì§ˆë¬¸

Timeseries ì˜ˆì¸¡ì„ ìƒì„±í•  ë•Œ, **ì–´ë–»ê²Œ ê³¼ê±° ë°ì´í„°ë¥¼ í™•ë³´í•  ê²ƒì¸ê°€?**

---

## Option 1: ì‚¬ìš©ì CSV ì—…ë¡œë“œ

### ì¥ì 
- âœ… **ìœ ì—°ì„±**: ì‚¬ìš©ìê°€ ì›í•˜ëŠ” ëª¨ë“  ë°ì´í„° ì˜ˆì¸¡ ê°€ëŠ¥
- âœ… **ë°ì´í„° ìœ ì§€ ë¶€ë‹´ ì—†ìŒ**: Factagoraê°€ ë°ì´í„° ê´€ë¦¬ ë¶ˆí•„ìš”
- âœ… **í‹ˆìƒˆ ì‹œì¥**: íŠ¹ìˆ˜í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë°ì´í„° ì˜ˆì¸¡ ê°€ëŠ¥
- âœ… **ì‚¬ìš©ì ë°ì´í„° ì†Œìœ ê¶Œ**: ë¯¼ê°í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë°ì´í„° ìœ ì§€

### ë‹¨ì 
- âŒ **ë°ì´í„° í’ˆì§ˆ ë¬¸ì œ**:
  - í¬ë§· ë¶ˆì¼ì¹˜ (ë‚ ì§œ í˜•ì‹, ì»¬ëŸ¼ëª…, êµ¬ë¶„ì)
  - ê²°ì¸¡ì¹˜, ì´ìƒì¹˜ ì²˜ë¦¬ ë³µì¡
  - ì£¼ê¸° ë¶ˆì¼ì¹˜ (ì¼ê°„, ì£¼ê°„, ì›”ê°„ í˜¼ì¬)
- âŒ **ë³´ì•ˆ/í”„ë¼ì´ë²„ì‹œ**:
  - ì—…ë¡œë“œëœ ë°ì´í„° ì €ì¥ ë° ê´€ë¦¬
  - GDPR/ê°œì¸ì •ë³´ ì´ìŠˆ
- âŒ **ê²€ì¦ ì–´ë ¤ì›€**:
  - ë°ì´í„° ì¶œì²˜ ë¶ˆëª…í™•
  - ì¡°ì‘ ê°€ëŠ¥ì„±
  - ì˜ˆì¸¡ ì •í™•ë„ í‰ê°€ ì–´ë ¤ì›€
- âŒ **ë³µì¡í•œ UX**:
  - íŒŒì¼ ì—…ë¡œë“œ â†’ ê²€ì¦ â†’ ì—ëŸ¬ ìˆ˜ì • â†’ ì¬ì—…ë¡œë“œ
  - ì¼ë°˜ ì‚¬ìš©ì ì§„ì…ì¥ë²½ ë†’ìŒ

### êµ¬í˜„ ë³µì¡ë„
- **ê³ ë‚œë„**: íŒŒì¼ íŒŒì‹±, ê²€ì¦, ì •ê·œí™”, ì €ì¥, ì—ëŸ¬ ì²˜ë¦¬
- **ê°œë°œ ì‹œê°„**: 2-3ì£¼

---

## Option 2: Factagora íë ˆì´ì…˜ ë°ì´í„°

### ì¥ì 
- âœ… **ë†’ì€ ë°ì´í„° í’ˆì§ˆ**:
  - ê²€ì¦ëœ ì¶œì²˜ (CoinGecko, Yahoo Finance, Alpha Vantage)
  - ì¼ê´€ëœ í¬ë§·
  - ìë™ ì—…ë°ì´íŠ¸
- âœ… **ë‹¨ìˆœí•œ UX**:
  - ë“œë¡­ë‹¤ìš´ì—ì„œ ì„ íƒë§Œ
  - ì¦‰ì‹œ ì˜ˆì¸¡ ìƒì„±
  - ì§„ì…ì¥ë²½ ë‚®ìŒ
- âœ… **ì‹ ë¢°ë„ ë†’ìŒ**:
  - ê³µì‹ API ë°ì´í„°
  - ì»¤ë®¤ë‹ˆí‹° ê²€ì¦ ê°€ëŠ¥
  - ê³¼ê±° ì˜ˆì¸¡ ì •í™•ë„ ì¶”ì  ê°€ëŠ¥
- âœ… **ë§ˆì¼€íŒ… íš¨ê³¼**:
  - "Bitcoin ì˜ˆì¸¡" â†’ ê²€ìƒ‰ ìœ ì…
  - ì¸ê¸° ìì‚° = ë” ë§ì€ ì°¸ì—¬
- âœ… **AI Agent ìµœì í™”**:
  - ê¹¨ë—í•œ ë°ì´í„° = ë” ë‚˜ì€ ì˜ˆì¸¡
  - ì¼ê´€ëœ í¬ë§· = í•™ìŠµ ìš©ì´

### ë‹¨ì 
- âŒ **ì œí•œëœ ì„ íƒì§€**:
  - Factagoraê°€ ì œê³µí•˜ëŠ” ìì‚°ë§Œ
  - í‹ˆìƒˆ ë°ì´í„° ì˜ˆì¸¡ ë¶ˆê°€
- âŒ **ìœ ì§€ ê´€ë¦¬ í•„ìš”**:
  - API ì—°ë™ ê´€ë¦¬
  - ë°ì´í„° ì—…ë°ì´íŠ¸
  - API ë¹„ìš© (ì¼ë¶€ ìœ ë£Œ)
- âŒ **ì˜ì¡´ì„±**:
  - ì™¸ë¶€ API ì¥ì•  ì‹œ ì˜í–¥

### êµ¬í˜„ ë³µì¡ë„
- **ì¤‘ê°„**: API ì—°ë™, ìŠ¤ì¼€ì¤„ëŸ¬, ìºì‹±
- **ê°œë°œ ì‹œê°„**: 1ì£¼

---

## Option 3: í•˜ì´ë¸Œë¦¬ë“œ (ê¶Œì¥ â­)

### Phase 1: MVP - íë ˆì´ì…˜ë§Œ (2-4ì£¼)
1. ì¸ê¸° ìì‚° 10-20ê°œë¡œ ì‹œì‘
2. ë¬´ë£Œ API í™œìš©
3. ë¹ ë¥¸ ì‹œì¥ ê²€ì¦

### Phase 2: CSV ì—…ë¡œë“œ ì¶”ê°€ (8-12ì£¼ í›„)
1. ì‚¬ìš©ì í”¼ë“œë°± ìˆ˜ì§‘ í›„
2. Premium ê¸°ëŠ¥ìœ¼ë¡œ ì œê³µ
3. ì—„ê²©í•œ ê²€ì¦ ë¡œì§

### ì¥ì 
- âœ… ë¹ ë¥¸ ì¶œì‹œ (Phase 1)
- âœ… ì‚¬ìš©ì ê²½í—˜ ìµœì í™”
- âœ… ì ì§„ì  í™•ì¥

---

## ì¶”ì²œ: Phase 1 íë ˆì´ì…˜ ë°ì´í„°

### 1ë‹¨ê³„: ë°ì´í„° ì†ŒìŠ¤ ì„ ì •

**ë¬´ë£Œ API (ì¶”ì²œ)**
| API | ë°ì´í„° | ì œí•œ | ë¹„ìš© |
|-----|--------|------|------|
| CoinGecko | ì•”í˜¸í™”í | 50 calls/min | ë¬´ë£Œ |
| Yahoo Finance (yfinance) | ì£¼ì‹, ETF | Unlimited | ë¬´ë£Œ |
| Alpha Vantage | ì£¼ì‹, Forex | 25 calls/day (ë¬´ë£Œ) | $49.99/mo (premium) |
| FRED API | ê²½ì œ ì§€í‘œ | 120 calls/min | ë¬´ë£Œ |

**ì´ˆê¸° ìì‚° ë¦¬ìŠ¤íŠ¸ (10-20ê°œ)**

**ì•”í˜¸í™”í** (CoinGecko):
- Bitcoin (BTC)
- Ethereum (ETH)
- Solana (SOL)
- Cardano (ADA)

**ì£¼ì‹** (Yahoo Finance):
- Apple (AAPL)
- Tesla (TSLA)
- NVIDIA (NVDA)
- Microsoft (MSFT)
- Amazon (AMZN)
- Google (GOOGL)

**ê²½ì œ ì§€í‘œ** (FRED):
- S&P 500 Index
- Gold Price
- US 10Y Treasury
- Crude Oil (WTI)

**Forex**:
- USD/KRW
- EUR/USD

### 2ë‹¨ê³„: ë°ì´í„° êµ¬ì¡°

```typescript
// Database schema extension
interface TimeseriesDataSource {
  id: string
  symbol: string           // "BTC", "AAPL"
  name: string            // "Bitcoin", "Apple Inc."
  category: string        // "crypto", "stock", "commodity"
  api_source: string      // "coingecko", "yahoo"
  api_config: {
    endpoint: string
    params: Record<string, any>
  }
  update_frequency: string // "hourly", "daily"
  last_updated: string
  is_active: boolean
}

// Historical data cache
interface TimeseriesDataPoint {
  source_id: string
  timestamp: string
  value: number
  volume?: number
  metadata?: Record<string, any>
}
```

### 3ë‹¨ê³„: UX í”Œë¡œìš°

**Prediction ìƒì„± ì‹œ**:
```
1. User: Timeseries íƒ€ì… ì„ íƒ
2. System: "Select an asset" ë“œë¡­ë‹¤ìš´ í‘œì‹œ

   ğŸ“Š Popular Assets
   â”œâ”€ ğŸ’° Crypto
   â”‚  â”œâ”€ Bitcoin (BTC)         $95,234  â†‘ 2.4%
   â”‚  â”œâ”€ Ethereum (ETH)        $3,456   â†‘ 1.8%
   â”‚  â””â”€ Solana (SOL)          $145     â†“ 0.5%
   â”œâ”€ ğŸ“ˆ Stocks
   â”‚  â”œâ”€ Apple (AAPL)          $178.23  â†‘ 0.8%
   â”‚  â”œâ”€ Tesla (TSLA)          $245.67  â†‘ 3.2%
   â”‚  â””â”€ NVIDIA (NVDA)         $789.45  â†‘ 5.1%
   â””â”€ ğŸŒ Commodities
      â”œâ”€ Gold (XAU/USD)        $2,034   â†‘ 0.3%
      â””â”€ Crude Oil (WTI)       $76.45   â†“ 1.2%

3. User: ìì‚° ì„ íƒ (ì˜ˆ: Bitcoin)
4. System: ìë™ìœ¼ë¡œ ì±„ì›Œì§
   - Asset: "Bitcoin"
   - Metric: "price"
   - Unit: "USD"
   - Historical data: ìµœê·¼ 1ë…„ ìë™ ë¡œë“œ

5. User: ì˜ˆì¸¡ ê¸°ê°„ ì„ íƒ
   - Start date: 2026-02-15 (í˜„ì¬)
   - End date: 2026-05-31
   - Interval: Daily / Weekly / Monthly

6. System: Prediction ìƒì„± ì™„ë£Œ
```

### 4ë‹¨ê³„: ë°ì´í„° íŒŒì´í”„ë¼ì¸

```typescript
// 1. Data Ingestion (ë§¤ì¼ ì‹¤í–‰)
async function updateTimeseriesData() {
  for (const source of activeSources) {
    const data = await fetchFromAPI(source)
    await cacheData(source.id, data)
  }
}

// 2. Data Serving (ì˜ˆì¸¡ ìƒì„± ì‹œ)
async function getHistoricalData(sourceId: string, dateRange: DateRange) {
  // Cacheì—ì„œ ì¡°íšŒ
  const cached = await db.query(`
    SELECT * FROM timeseries_data
    WHERE source_id = $1
    AND timestamp BETWEEN $2 AND $3
    ORDER BY timestamp ASC
  `, [sourceId, dateRange.start, dateRange.end])

  return cached
}

// 3. Prediction Context (AI Agentì—ê²Œ ì œê³µ)
async function buildPredictionContext(predictionId: string) {
  const prediction = await getPrediction(predictionId)
  const historicalData = await getHistoricalData(
    prediction.timeseries_source_id,
    { start: oneYearAgo, end: now }
  )

  return {
    asset: prediction.asset,
    historical: historicalData,
    target_date: prediction.deadline,
    current_value: historicalData[historicalData.length - 1].value
  }
}
```

### 5ë‹¨ê³„: ë¹„ìš© ê´€ë¦¬

**ë¬´ë£Œ í‹°ì–´ ì œí•œ**:
- CoinGecko: 50 calls/min â†’ ì¶©ë¶„ (10ê°œ ìì‚° Ã— 1ì¼ 1íšŒ = 10 calls/day)
- Yahoo Finance: Unlimited â†’ ì™„ë²½
- FRED: 120 calls/min â†’ ì¶©ë¶„

**ìºì‹± ì „ëµ**:
- ì¼ê°„ ë°ì´í„°: 1ì¼ 1íšŒ ì—…ë°ì´íŠ¸ (ë§¤ì¼ ìì •)
- ì‹¤ì‹œê°„ ê°€ê²©: 15ë¶„ë§ˆë‹¤ ì—…ë°ì´íŠ¸ (í‘œì‹œìš©)
- ê³¼ê±° ë°ì´í„°: ì˜êµ¬ ìºì‹± (ë³€í•˜ì§€ ì•ŠìŒ)

**ì˜ˆìƒ ë¹„ìš©**: $0/ì›” (ë¬´ë£Œ APIë§Œ ì‚¬ìš©)

---

## êµ¬í˜„ ê³„íš

### Sprint 1: ë°ì´í„° ì†ŒìŠ¤ ì„¤ì • (2-3ì¼)
- [ ] `timeseries_sources` í…Œì´ë¸” ìƒì„±
- [ ] ì´ˆê¸° 10ê°œ ìì‚° ì„¤ì •
- [ ] CoinGecko API ì—°ë™
- [ ] Yahoo Finance API ì—°ë™

### Sprint 2: ë°ì´í„° íŒŒì´í”„ë¼ì¸ (3-4ì¼)
- [ ] ì¼ê°„ ë°ì´í„° ìˆ˜ì§‘ ìŠ¤í¬ë¦½íŠ¸
- [ ] `timeseries_data` í…Œì´ë¸” ìƒì„±
- [ ] ìºì‹± ë¡œì§ êµ¬í˜„
- [ ] Cron job ì„¤ì • (ë§¤ì¼ ìì •)

### Sprint 3: UI ì—…ë°ì´íŠ¸ (2-3ì¼)
- [ ] ìì‚° ì„ íƒ ë“œë¡­ë‹¤ìš´
- [ ] ì‹¤ì‹œê°„ ê°€ê²© í‘œì‹œ
- [ ] ê³¼ê±° ë°ì´í„° ë¯¸ë¦¬ë³´ê¸° ì°¨íŠ¸
- [ ] Form ìë™ ì±„ìš°ê¸°

### Sprint 4: Prediction ìƒì„± (2ì¼)
- [ ] API ìˆ˜ì • (timeseries_source_id ì¶”ê°€)
- [ ] ê³¼ê±° ë°ì´í„° ì—°ë™
- [ ] ê²€ì¦ ë¡œì§

**ì´ ê°œë°œ ì‹œê°„**: 9-12ì¼ (2ì£¼ Sprint)

---

## Phase 2: CSV ì—…ë¡œë“œ (ì¶”í›„)

### ì–¸ì œ êµ¬í˜„í• ê¹Œ?
1. **ì‚¬ìš©ì ìš”ì²­ì´ ë§ì„ ë•Œ**
   - "ì´ ìì‚°ì„ ì˜ˆì¸¡í•˜ê³  ì‹¶ì€ë° ì—†ì–´ìš”"
   - 10+ ìš”ì²­ ëˆ„ì  ì‹œ

2. **íë ˆì´ì…˜ ìì‚°ì´ ì¶©ë¶„í•  ë•Œ**
   - 50+ ìì‚° í™•ë³´
   - ë‹¤ì–‘í•œ ì¹´í…Œê³ ë¦¬ ì»¤ë²„

3. **Premium ê¸°ëŠ¥ìœ¼ë¡œ ì œê³µ**
   - ë¬´ë£Œ: íë ˆì´ì…˜ ìì‚°ë§Œ
   - Pro: CSV ì—…ë¡œë“œ ê°€ëŠ¥

### CSV ì—…ë¡œë“œ ê¸°ëŠ¥ ëª…ì„¸ (ì°¸ê³ ìš©)
```typescript
// Required CSV format
// date,value
// 2024-01-01,100.5
// 2024-01-02,101.2

interface CSVUploadValidation {
  minDataPoints: 30      // ìµœì†Œ 30ì¼ ë°ì´í„°
  maxFileSize: 5MB
  requiredColumns: ["date", "value"]
  dateFormat: "YYYY-MM-DD"
  valueType: "number"
}
```

---

## ìµœì¢… ì¶”ì²œ: Curated Data First

**ì´ìœ **:
1. âœ… **ë¹ ë¥¸ ì¶œì‹œ**: 2ì£¼ë©´ ì™„ì„±
2. âœ… **ë†’ì€ í’ˆì§ˆ**: ê²€ì¦ëœ ë°ì´í„°
3. âœ… **ë‹¨ìˆœí•œ UX**: ì„ íƒë§Œ í•˜ë©´ ë
4. âœ… **ë§ˆì¼€íŒ… íš¨ê³¼**: "Bitcoin ì˜ˆì¸¡" í‚¤ì›Œë“œ
5. âœ… **AI ìµœì í™”**: ê¹¨ë—í•œ ë°ì´í„°
6. âœ… **ë¬´ë£Œ**: API ë¹„ìš© $0

**ë‹¤ìŒ ë‹¨ê³„**:
1. Phase 1 êµ¬í˜„ í›„ ì‚¬ìš©ì ë°˜ì‘ ê´€ì°°
2. ìš”ì²­ ë§ì€ ìì‚° ìš°ì„  ì¶”ê°€
3. ë‚˜ì¤‘ì— CSV ì—…ë¡œë“œ ê³ ë ¤

**ì‹œì‘í• ê¹Œìš”?**
- Option A: ì§€ê¸ˆ ë°”ë¡œ êµ¬í˜„ ì‹œì‘
- Option B: ë” ë…¼ì˜ í›„ ê²°ì •
